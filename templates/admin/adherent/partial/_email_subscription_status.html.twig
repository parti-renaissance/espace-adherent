{% macro display_row(icon, label) %}
    <span class="text-nowrap" style="display: flex;gap: 0.5rem;">
        <span>{{ icon }}</span>
        <span>{{ label|raw }}</span>
    </span>
{% endmacro %}

<div style="display: flex;flex-direction: column;">
    {% if not object.isEnabled() or object.getMailchimpStatus() == constant('App\\Mailchimp\\Contact\\ContactStatusEnum::UNSUBSCRIBED') %}
        {% set label = 'D√©sabonn√©' %}
    {% elseif object.getMailchimpStatus() == constant('App\\Mailchimp\\Contact\\ContactStatusEnum::SUBSCRIBED') %}
        {% set label = 'Abonn√©' %}
    {% elseif object.getMailchimpStatus() == constant('App\\Mailchimp\\Contact\\ContactStatusEnum::CLEANED') %}
        {% set label = '<span class="label label-danger">Cleaned</span>' %}
    {% endif %}

    {{ _self.display_row('‚úâÔ∏è', label) }}

    {% if not object.getPhone() %}
        {% set label = 'Pas de num√©ro' %}
    {% elseif object.hasSmsSubscriptionType() %}
        {% set label = 'Abonn√©' %}
    {% else %}
        {% set label = 'D√©sabonn√©' %}
    {% endif %}

    {{ _self.display_row('üìû', label) }}

    {% set system_enum = enum('App\\AppSession\\SystemEnum') %}
    {% set active_web_session = object.findAppSessions(get_vox_client(), true, [system_enum.WEB])|first %}
    {% if active_web_session %}
        {% if active_web_session.findSubscribedPushTokenLinks()|length %}
            {% set label = 'Abonn√©' %}
        {% else %}
            {% set label = 'D√©sabonn√©' %}
        {% endif %}

        {{ _self.display_row('üíª', label) }}
    {% endif %}

    {% set active_mobile_session = object.findAppSessions(get_vox_client(), true, [system_enum.IOS, system_enum.ANDROID])|first %}
    {% if active_mobile_session %}
        {% if active_mobile_session.findSubscribedPushTokenLinks()|length %}
            {% set label = 'D√©sabonn√©' %}
        {% else %}
            {% set label = 'Abonn√©' %}
        {% endif %}

        {{ _self.display_row('üì±', label) }}
    {% endif %}
</div>
