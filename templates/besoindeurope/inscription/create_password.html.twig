{% extends 'besoindeurope/inscription/_layout.html.twig' %}

{% block page_title 'Création de mot de passe' %}

{% form_theme form 'renaissance/forms/tailwind_form_theme.html.twig' %}

{% block content_section %}
    <twig:Atoms:ReCard class="max-w-[500px]" x-data="xCreatePasswordForm">
        {% include 'renaissance/partials/flashes.html.twig' with {slim: true} %}

        {{ form_start(form, { attr: { 'x-ref': 'form', class: 'flex gap-6 flex-col'} }) }}
            {{ form_errors(form) }}

            <p class="font-medium">Nouveau mot de passe</p>

            <p class="text-ui_gray-80">
                Votre mot de passe doit faire au moins 8 caractères.
            </p>

            {{ form_row(form.password.first, {label: false, attr: {
                placeholder: 'Mon mot de passe',
                class: 'w-full',
                onCheck: "setFieldValid('password')",
                validate: "['required']",
                autocomplete: 'new-password',
                'x-on:input': 'handlePasswordInput($event)',
            }}) }}

            {{ form_row(form.password.second, {label: false, attr: {
                placeholder: 'Confirmer mon mot de passe',
                class: 'w-full',
                onCheck: "setFieldValid('passwordConfirmation')",
                validate: "['required']",
                autocomplete: 'new-password',
                xSyncLoading: 'loading',
                'x-bind:disabled': '!isPasswordChanged',
            }}) }}

            {{ form_row(form.submit, { label: 'Valider', attr: {
                color: "black",
                class: "w-full",
                'x-on:click': "handleSubmit($event)",
                'x-bind:class': "{disabled: !checkValidity()}",
            }}) }}
        {{ form_end(form) }}
    </twig:Atoms:ReCard>
{% endblock %}

{% block final_javascripts %}
    <script>
        Bootstrap.onLoad(() => Main.runAdhesionCreatePasswordPage());
    </script>
{% endblock %}
