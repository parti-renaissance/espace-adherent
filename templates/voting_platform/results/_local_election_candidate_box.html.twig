{% import 'voting_platform/_macros.html.twig' as helper %}

{% set candidate_group = candidate_group_result.candidateGroup %}

<div class="candidate__box {{ candidate_group.elected ? 'elected' }} l__row  b__nudge--bottom-medium">
    <div class="box__content">
        <div class="l__row l__row--h-stretch">
            <h3 class="text--medium pool-name">
                {% set candidacies = candidate_group.getCandidatesSorted() %}
                {{ get_election_pool_title_key(pool_result.electionPool)|trans }}
            </h3>
            <div class="text--body text--right text--dark">{{ candidate_group_result.total }} bulletin{{ candidate_group_result.total > 1 ? 's' }}</div>
        </div>

        <ul class="candidate-names">
            {% for candidate in candidacies|filter(cand => cand.isAdditionallyElected()) %}
                <li class="text--body">{{ candidate.fullName }}
                    {% if (pool_result.isElected and candidate_group.elected) or candidate.isAdditionallyElected %}
                        <span class="elected-tag text--body text--on-yellow text--bold b__nudge--left-small">
                            Ã‰lu{{ candidate.isFemale ? 'e' }}
                        </span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>

        <div class="candidate-footer l__row">
            <div class="l__row progress-bar">
                {% set votes_rate = candidate_group_result.rate %}
                <div class="progress-bar__gauge">
                    <div class="slider" style="width: {{ votes_rate }}%"></div>
                </div>
                <div class="progress-bar__value text--right text--body">{{ votes_rate|number_format(0) }}%</div>
            </div>
        </div>
    </div>
</div>
